// Generated by JGateCodegenPlugin. DO NOT EDIT!

package $subscribersPackage;

import com.stroganov.jgate.Application;
import com.stroganov.jgate.StreamDataMessageSubscriber;
import ru.micexrts.cgate.*;
import ru.micexrts.cgate.messages.*;

import $listenersPackage.${scheme.getName()}Listener;

public final class ${scheme.getName()}Subscriber extends StreamDataMessageSubscriber<${scheme.getName()}Listener> {
    public final static String schemeFile = "$scheme.getFile().getName()";
    public final static String schemeName = "$scheme.getName()";

    public ${scheme.getName()}Subscriber(${scheme.getName()}Listener listener) { super(listener); }

    @Override
    protected int onMessage(Application.JGateListener jgateListener, StreamDataMessage message) {
        switch (message.getMsgIndex()) {
#foreach ($table in $scheme.getTables())
            case $schemasPackage.$scheme.getName().${table}.TABLE_INDEX: {
                $schemasPackage.$scheme.getName().$table msg = new $schemasPackage.$scheme.getName().${table}();
                msg.setData(message.getData());
                try {
                    userListener.onMessage(jgateListener, msg);
                } finally {
                    msg.setData(null);
                }
                break;
            }
#end
        }
        return ErrorCode.OK;
    }

}
